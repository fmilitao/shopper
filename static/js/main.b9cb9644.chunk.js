(this.webpackJsonpshopper=this.webpackJsonpshopper||[]).push([[0],{104:function(e,t,n){},144:function(e,t,n){"use strict";n.r(t);var a,i=n(0),o=n.n(i),l=n(8),r=n.n(l),c=(n(104),n(11)),u=n(51),s=n(50),d={title:"ShopperState",type:"object",properties:{selectedList:{type:"number"},lists:{type:"array",minItems:0,items:{type:"object",required:["name","items"],properties:{name:{type:"string"},items:{type:"array",minItems:0,items:{type:"object",required:["name","quantity","enabled"],properties:{name:{type:"string"},quantity:{type:"number"},enabled:{type:"boolean"}}}}}}}},additionalProperties:!1,required:["lists"]};!function(e){e[e.ADD_LIST=0]="ADD_LIST",e[e.EDIT_LIST=1]="EDIT_LIST",e[e.ADD_ITEM=2]="ADD_ITEM",e[e.EDIT_ITEM=3]="EDIT_ITEM"}(a||(a={}));var m=n(76),p=n.n(m),f="shopper-state";function b(e){var t=new p.a({allErrors:!0}).compile(d);if(t(e))return e;throw console.error("Existing state object:\n".concat(JSON.stringify(e,null,2),"\nFailed validation:\n").concat(JSON.stringify(t.errors,null,2))),Error("Invalid localStorage object")}var v=function(e){var t=localStorage.getItem(f);return null===t?e:b(JSON.parse(t))}({selectedList:void 0,lists:[]}),g=function(e,t){return e>=0&&e<t.length},E=Object(s.b)({name:"shopper",initialState:v,reducers:{addList:function(e,t){e.dialogState=void 0,e.lists.push({name:t.payload,items:[]})},editList:function(e,t){var n=e.dialogState;if(n&&n.type===a.EDIT_LIST){var i=n.index,o=t.payload;g(i,e.lists)&&(e.lists[i].name=o)}e.dialogState=void 0},deleteList:function(e,t){var n=t.payload;g(n,e.lists)&&e.lists.splice(n,1)},selectList:function(e,t){e.selectedList=t.payload},deselectList:function(e){e.selectedList=void 0},addItem:function(e,t){e.dialogState=void 0;var n=t.payload,a=n.name,i=n.quantity,o=e.selectedList;void 0!==o&&g(o,e.lists)&&e.lists[o].items.push({name:a,quantity:i,enabled:!0})},editItem:function(e,t){var n=e.dialogState;if(n&&n.type===a.EDIT_ITEM){var i=n.index,o=t.payload,l=o.name,r=o.quantity,c=e.selectedList,u=i;if(void 0!==c&&g(c,e.lists)&&g(u,e.lists[c].items)){var s=e.lists[c].items[u];s.name=l,s.quantity=r}}e.dialogState=void 0},deleteItem:function(e,t){var n=e.selectedList,a=t.payload;void 0!==n&&g(n,e.lists)&&g(a,e.lists[n].items)&&e.lists[n].items.splice(a,1)},toggleItem:function(e,t){var n=e.selectedList,a=t.payload;if(void 0!==n&&g(n,e.lists)&&g(a,e.lists[n].items)){var i=e.lists[n].items[a];i.enabled=!i.enabled}},openAddListDialog:function(e){e.dialogState={type:a.ADD_LIST}},openEditListDialog:function(e,t){e.dialogState={type:a.EDIT_LIST,index:t.payload}},openAddItemDialog:function(e){e.dialogState={type:a.ADD_ITEM}},openEditItemDialog:function(e,t){e.dialogState={type:a.EDIT_ITEM,index:t.payload}},closeDialog:function(e){e.dialogState=void 0},copyToClipboard:function(e){var t,n;(null===(t=navigator)||void 0===t||null===(n=t.clipboard)||void 0===n?void 0:n.writeText)?(navigator.clipboard.writeText(JSON.stringify(e)),C.log("Copied to clipboard.")):C.log("ERROR: Missing clipboard browser functionality")},updateState:function(e,t){e.lists=t.payload.lists,e.selectedList=void 0}}}),y=E.actions,h=E.reducer,O=Object(s.a)({reducer:h}),I=Object(u.a)({},y,{importFromClipboard:function(){return function(e){var t,n;(null===(t=navigator)||void 0===t||null===(n=t.clipboard)||void 0===n?void 0:n.readText)?navigator.clipboard.readText().then((function(t){var n=b(JSON.parse(t));e(y.updateState(n)),C.log("Imported from clipboard")})).catch((function(e){console.log(e),C.log("ERROR: ".concat(e))})):C.log("ERROR: Missing clipboard browser functionality")}}}),C={log:function(e){return console.log(e)}};O.subscribe((function(){!function(e){var t=Object(u.a)({},e,{dialogState:void 0});localStorage.setItem(f,JSON.stringify(t))}(O.getState())}));var L=n(183),S=n(201),T=n(187),D=n(188),x=n(36),j=n(80),k=n.n(j),w=n(179),N=n(77),q=n.n(N),_=Object(L.a)((function(e){return Object(S.a)({button:{color:"inherit"}})})),A=Object(c.b)((function(){return{}}),{openDialog:function(){return I.openAddListDialog()}})((function(e){var t=_();return o.a.createElement(w.a,{className:t.button,edge:"end",title:"Add list",color:"secondary","aria-label":"add",onClick:function(){return e.openDialog()}},o.a.createElement(q.a,null))})),M=n(78),B=n.n(M),R=Object(L.a)((function(e){return Object(S.a)({button:{color:"inherit"}})})),F=Object(c.b)((function(){return{}}),{openDialog:function(){return I.openAddItemDialog()}})((function(e){var t=R();return o.a.createElement(w.a,{className:t.button,edge:"end",title:"Add item",color:"secondary","aria-label":"add",onClick:function(){return e.openDialog()}},o.a.createElement(B.a,null))})),J=n(18),P=n(83),V=n(186),W=n(79),G=n.n(W),H=function(e){var t=U(),n=o.a.useState(null),a=Object(J.a)(n,2),i=a[0],l=a[1],r=function(){l(null)};return o.a.createElement("div",null,o.a.createElement(w.a,{className:t.button,"aria-controls":"simple-menu",edge:"end","aria-label":"menu",color:"secondary","aria-haspopup":"true",onClick:function(e){l(e.currentTarget)}},o.a.createElement(G.a,null)),o.a.createElement(P.a,{anchorEl:i,keepMounted:!0,open:Boolean(i),onClose:r},e.actions.map((function(e,t){var n=e.label,a=e.action;return o.a.createElement(V.a,{key:t,onClick:function(){r(),a()}},n)}))))},U=Object(L.a)((function(e){return Object(S.a)({button:{color:"inherit"}})})),z=Object(L.a)((function(e){return Object(S.a)({root:{flexGrow:0},title:{flexGrow:0},menuButton:{flexGrow:0},rightButton:{flexGrow:1,display:"flex",justifyContent:"flex-end",alignItems:"flex-end"}})}));var Q=Object(c.b)((function(e){if(void 0!==e.selectedList){var t=e.lists[e.selectedList],n=t.name;return{selectedList:{totalItemCount:t.items.length,pendingItemCount:t.items.reduce((function(e,t){return e+Number(!!t.enabled)}),0),listName:n}}}return{selectedList:void 0}}),{deselectList:function(){return I.deselectList()},copyToClipboard:function(){return I.copyToClipboard()},importFromClipboard:function(){return I.importFromClipboard()}})((function(e){var t=z(),n="Shopper";if(e.selectedList){var a=e.selectedList,i=a.listName,l=a.pendingItemCount,r=a.totalItemCount;n=i,r>0&&(n="(".concat(l,") ").concat(n))}return o.a.createElement("div",{className:t.root},o.a.createElement(T.a,{position:"static"},o.a.createElement(D.a,null,e.selectedList&&o.a.createElement(w.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu",onClick:function(){return e.deselectList()}},o.a.createElement(k.a,null)),o.a.createElement(x.a,{variant:"h6",className:t.title,onClick:function(){"Shopper"===n&&C.log("commit: 1917c43 (2020-06-14T11:52:11.537Z)")}},n),o.a.createElement("div",{className:t.rightButton},e.selectedList?o.a.createElement(F,null):o.a.createElement(A,null)),o.a.createElement(H,{actions:[{label:"import from clipboard",action:function(){return e.importFromClipboard()}},{label:"copy to clipboard",action:function(){return e.copyToClipboard()}}]}))))})),Z=n(185),$=n(146),K=n(189),X=n(190);function Y(e){var t=ee(),n=e.lists.sort((function(e,t){return Number(!e.enabled)-Number(!t.enabled)}));return o.a.createElement("div",{className:t.root},o.a.createElement(Z.a,{component:"nav",className:t.list},n.map((function(n){var a=n.name,i=n.comment,l=n.enabled,r=n.index;return o.a.createElement($.a,{style:{backgroundColor:!1!==l?"white":"gray"},key:r,button:!0,onClick:function(){return e.onClick(r)}},o.a.createElement(K.a,{primary:a,secondary:i}),o.a.createElement(X.a,{className:t.menuButton},o.a.createElement(H,{actions:[{label:"edit",action:function(){return e.onEdit(r)}},{label:"delete",action:function(){return e.onDelete(r)}}]})))}))))}var ee=Object(L.a)((function(e){return Object(S.a)({root:{backgroundColor:e.palette.background.default,flex:"1",height:"90vh",display:"flex",flexDirection:"column"},list:{overflow:"scroll"},menuButton:{color:e.palette.grey[500]}})})),te={onDelete:function(e){return I.deleteList(e)},onEdit:function(e){return I.openEditListDialog(e)},onClick:function(e){return I.selectList(e)}},ne=Object(c.b)((function(e){return{lists:e.lists.map((function(e,t){var n=e.name,a=e.items;return{name:n,comment:"".concat(a.length," items"),index:t}}))}}),te)(Y),ae=n(195),ie=n(197),oe=n(200),le=n(194),re=n(192),ce=n(193),ue=n(191),se=function(e){return e.trim().length>0},de=function(e){var t=se(e.value),n=o.a.useState(t),a=Object(J.a)(n,2),i=a[0],l=a[1],r=o.a.useState(e.value),c=Object(J.a)(r,2),u=c[0],s=c[1];function d(t){t?e.onClose(u):e.onClose()}return o.a.createElement(oe.a,{open:e.isOpen,onEnter:function(){return s(e.value),void l(se(e.value))},onClose:function(){return d(!1)}},o.a.createElement(ue.a,null,e.title),o.a.createElement(re.a,null,o.a.createElement(ce.a,null,e.descriptionText),o.a.createElement(ie.a,{error:!i,autoFocus:!0,margin:"dense",label:"List name",type:"text",onChange:function(e){var t=e.target.value;s(t),l(se(t))},fullWidth:!0,value:u})),o.a.createElement(le.a,null,o.a.createElement(ae.a,{onClick:function(){return d(!1)},color:"primary"},"Cancel"),o.a.createElement(ae.a,{onClick:function(){return d(!0)},color:"primary",disabled:!i},e.okText)))},me=Object(c.b)((function(e){var t;return{isOpen:(null===(t=e.dialogState)||void 0===t?void 0:t.type)===a.ADD_LIST}}),{onClose:function(e){return e?I.addList(e):I.closeDialog()}})((function(e){return o.a.createElement(de,Object.assign({value:"",title:"Create List",okText:"Create",descriptionText:"Pick the name for your new list."},e))})),pe=function(e){return{name:e.name.trim().length>0,quantity:e.quantity>0}},fe=function(e){var t=pe(e.value),n=o.a.useState(t),a=Object(J.a)(n,2),i=a[0],l=a[1],r=o.a.useState(e.value),c=Object(J.a)(r,2),u=c[0],s=c[1];function d(t){t?e.onClose(u):e.onClose(),s(e.value)}return o.a.createElement("div",null,o.a.createElement(oe.a,{open:e.isOpen,onEnter:function(){return s(e.value),void l(pe(e.value))},onClose:function(){return d(!1)}},o.a.createElement(ue.a,null,e.title),o.a.createElement(re.a,null,o.a.createElement(ce.a,null,e.descriptionText),o.a.createElement(ie.a,{error:!i.name,autoFocus:!0,margin:"dense",label:"Item name",type:"text",onChange:function(e){var t={name:e.target.value,quantity:u.quantity};s(t),l(pe(t))},fullWidth:!0,value:u.name}),o.a.createElement(ie.a,{error:!i.quantity,id:"standard-number",label:"Quantity",placeholder:"How many of this item",value:u.quantity,onChange:function(e){var t={name:u.name,quantity:Number(e.target.value)};s(t),l(pe(t))},type:"number",fullWidth:!0,InputLabelProps:{shrink:!0},margin:"normal"})),o.a.createElement(le.a,null,o.a.createElement(ae.a,{onClick:function(){return d(!1)},color:"primary"},"Cancel"),o.a.createElement(ae.a,{onClick:function(){return d(!0)},color:"primary",disabled:!i.name||!i.quantity},e.okText))))},be={name:"",quantity:1},ve=Object(c.b)((function(e){var t;return{isOpen:(null===(t=e.dialogState)||void 0===t?void 0:t.type)===a.ADD_ITEM}}),{onClose:function(e){return e?I.addItem(e):I.closeDialog()}})((function(e){return o.a.createElement(fe,Object.assign({value:be,title:"Create Item",okText:"Create",descriptionText:"Pick the name for your new item."},e))})),ge=Object(c.b)((function(e){var t=e.dialogState;return(null===t||void 0===t?void 0:t.type)===a.EDIT_LIST&&t.index>=0&&t.index<e.lists.length?{isOpen:!0,initialValue:e.lists[t.index].name}:{isOpen:!1,initialValue:""}}),{onClose:function(e){return e?I.editList(e):I.closeDialog()}})((function(e){return o.a.createElement(de,Object.assign({value:e.initialValue,title:"Edit List",okText:"Update",descriptionText:"Pick the name for your list."},e))})),Ee=Object(c.b)((function(e){var t=e.dialogState,n=e.selectedList;return void 0!==n&&n>=0&&n<e.lists.length&&(null===t||void 0===t?void 0:t.type)===a.EDIT_ITEM&&t.index>=0&&t.index<e.lists[n].items.length?{isOpen:!0,initialValue:e.lists[n].items[t.index]}:{isOpen:!1,initialValue:{name:"",quantity:1}}}),{onClose:function(e){return e?I.editItem(e):I.closeDialog()}})((function(e){return o.a.createElement(fe,Object.assign({value:e.initialValue,title:"Edit List",okText:"Update",descriptionText:"Pick the name for your list."},e))})),ye={onDelete:function(e){return I.deleteItem(e)},onEdit:function(e){return I.openEditItemDialog(e)},onClick:function(e){return I.toggleItem(e)}},he=Object(c.b)((function(e){var t=e.selectedList;return void 0!==t?{lists:e.lists[t].items.map((function(e,t){var n=e.name,a=e.quantity,i=e.enabled;return{name:n,comment:"".concat(a," elements"),enabled:i,index:t}}))}:{lists:[]}}),ye)(Y),Oe=n(199),Ie=n(81),Ce=n.n(Ie),Le=Object(L.a)((function(e){return{close:{padding:e.spacing(.5)}}})),Se=function(){var e=Le(),t=o.a.useState(!1),n=Object(J.a)(t,2),a=n[0],i=n[1],l=o.a.useState("Hello!"),r=Object(J.a)(l,2),c=r[0],u=r[1];function s(e,t){"clickaway"!==t&&i(!1)}return C.log=function(e){u(e),i(!0)},o.a.createElement(Oe.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:a,autoHideDuration:2e3,onClose:s,message:c,action:[o.a.createElement(w.a,{key:"close","aria-label":"Close",color:"inherit",className:e.close,onClick:s},o.a.createElement(Ce.a,null))]})};var Te=Object(c.b)((function(e){return{isListSelected:void 0!==e.selectedList}}))((function(e){var t=e.isListSelected;return o.a.createElement("div",{style:{flex:1,display:"flex",flexFlow:"column",height:"100%"}},o.a.createElement(Q,null),t?o.a.createElement(he,null):o.a.createElement(ne,null),t?o.a.createElement(ve,null):o.a.createElement(me,null),t?o.a.createElement(Ee,null):o.a.createElement(ge,null),o.a.createElement(Se,null))})),De=n(82),xe=n(196),je=Object(De.a)({props:{MuiButtonBase:{disableRipple:!0}},transitions:{create:function(){return"none"}}}),ke=Object(L.a)((function(e){return Object(S.a)({app:{minHeight:"100vh",height:"100%",display:"flex",overflow:"hidden",flexDirection:"column"}})})),we=function(){var e=ke();return o.a.createElement(xe.a,{theme:je},o.a.createElement("div",{className:e.app},o.a.createElement(Te,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(c.a,{store:O},o.a.createElement(we,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},99:function(e,t,n){e.exports=n(144)}},[[99,1,2]]]);
//# sourceMappingURL=main.b9cb9644.chunk.js.map